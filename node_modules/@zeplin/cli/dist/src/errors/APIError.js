"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.APIError = void 0;
const http_status_codes_1 = require("http-status-codes");
const CLIError_1 = require("./CLIError");
class APIError extends CLIError_1.CLIError {
    constructor(response) {
        let message;
        if (response.data) {
            switch (response.status) {
                case http_status_codes_1.UNAUTHORIZED:
                    message = "Looks like your session has expired, please login again.";
                    break;
                case http_status_codes_1.BAD_REQUEST:
                    message = "There is a problem with the API request.";
                    break;
                default:
                    message = `${response.data.title} - ${response.data.message}`;
                    break;
            }
        }
        else {
            message = "Error occurred on API request. Please try again later.";
        }
        super(message);
        this.status = response.status;
        this.details = response.data;
    }
    static isAPIError(err) {
        return err instanceof APIError;
    }
    static isUnauthorized(err) {
        return this.isAPIError(err) && err.status === http_status_codes_1.UNAUTHORIZED;
    }
}
exports.APIError = APIError;
